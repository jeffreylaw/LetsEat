(this["webpackJsonplets-eat-react"]=this["webpackJsonplets-eat-react"]||[]).push([[0],{40:function(e,t,n){e.exports=n(89)},46:function(e,t,n){e.exports=n.p+"static/media/non_existent_image2.7e62e439.jpg"},47:function(e,t,n){e.exports=n.p+"static/media/dishes.fb0434cc.svg"},87:function(e,t,n){e.exports=n.p+"static/media/cute.12bc02f1.svg"},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);n(41);var a=n(0),r=n.n(a),l=n(11),c=n.n(l),o=n(6),i=n(12),s=function(e){var t=e.foodList,n=e.setFoodList;return 0===t.length?null:r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group list-group-flush",style:{margin:"10px"}},t.map((function(e){return r.a.createElement("li",{className:"list-group-item list-item text-center",key:e},e," ",r.a.createElement(i.a,{className:"ml-2 float-right",variant:"danger",onClick:function(){return n(t.filter((function(t){return t!==e})))}},"\u2715"))}))))},u=function(e){var t=e.message,n=e.type;return null===t?null:"error"===n?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},t):r.a.createElement("div",{className:"alert alert-success",role:"alert"},t)},m=n(10),d=function(e){var t=e.restaurant,a=e.coordinates,l=t.location.address.split(" ").join("+").replace(/,/g,""),c="".concat(a.latitude,",").concat(a.longitude),o="https://www.google.com/maps/dir/?api=1&origin=".concat(c,"&destination=").concat(t.name,"+").concat(l);return r.a.createElement(m.a,{style:{width:"18rem",margin:"0 auto"}},r.a.createElement(m.a.Img,{variant:"top",src:t.thumb||n(46)}),r.a.createElement(m.a.Body,null,r.a.createElement(m.a.Title,{className:"centerText"},r.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.name)),r.a.createElement(m.a.Subtitle,{className:"text-dark"},t.location.address),r.a.createElement(m.a.Text,null,r.a.createElement("b",null,"Hours: "),t.timings,r.a.createElement("br",null),r.a.createElement("b",null,"Cuisines: "),t.cuisines," ",r.a.createElement("br",null),r.a.createElement("b",null,"Price range: "),"$".repeat(t.price_range),"  ",r.a.createElement("b",null,"Rating: "),t.user_rating.aggregate_rating," (",t.user_rating.votes,")",r.a.createElement("a",{href:o,className:"btn btn-outline-primary mt-1",style:{display:"block"},target:"_blank",rel:"noopener noreferrer"},"Get Directions"))))},f=n(17),g=n(16),E=function(e){var t=e.restaurants,n=e.coordinates;return r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,{className:"justify-content-md-center"},t.map((function(e){return r.a.createElement(d,{key:e.id,restaurant:e,coordinates:n})}))))},h=function(e){var t=e.restaurantList,n=e.newSearch,a=e.foodInput,l=e.handleFoodInputChange,c=e.addFoodItem,o=e.handleChooseButton,s=e.spinning,u=e.loading;return t.length>0?r.a.createElement(i.a,{onClick:n},"Start new search"):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:a,onChange:l}),r.a.createElement(i.a,{onClick:c,className:"ml-1"},"Add"),r.a.createElement(i.a,{onClick:o,disabled:s||u,className:"ml-1 btn-power-blue"},"Decide for me"),r.a.createElement("br",null))},b=n(21),p=function(){return r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,{className:"d-flex flex-column"},r.a.createElement(b.a,{className:"d-flex flex-sm-row flex-column align-items-center justify-content-center"},r.a.createElement("img",{src:n(47),style:{width:"16rem",marginRight:"0"},alt:"dishes with smiley face"}),r.a.createElement("p",{className:"lead intro-p"},r.a.createElement("b",null,"LetsEat")," is a cuisine decider app for the undecisive.",r.a.createElement("br",null),r.a.createElement("br",null),"Create a list of dishes or cuisines of what you or your friends might want to eat and we will do the decision-making for you.")),r.a.createElement(b.a,{className:"d-flex align-items-center justify-content-center lead"},r.a.createElement("ol",null,r.a.createElement("h3",{className:"font-weight-light"},"How to use"),r.a.createElement("li",null,"Enter dishes or cuisines that you might like to eat."),r.a.createElement("li",null,"Let us randomly choose an item from the list."),r.a.createElement("li",null,"Browse through the relevant restaurants around your location.*"),r.a.createElement("p",null,r.a.createElement("small",{className:"text-muted"},"*Access to your location required. Accuracy may vary on PC devices."))))))},y=n(38),v=function(e){var t=e.foodList,n=e.setChosenFood,l=e.setSpinning,c=e.setFoodList,i=e.spinning,s=e.chosenFood,u=Object(a.useRef)(null),m=Object(a.useState)(""),d=Object(o.a)(m,2),f=d[0],g=d[1],E=Object(a.useState)([]),h=Object(o.a)(E,2),b=h[0],p=h[1];return console.log(f),Object(a.useEffect)((function(){var e;i&&(console.log("a"),p((e=[]).concat.apply(e,Object(y.a)(Array(10).fill(t)))),g(t[Math.floor(Math.random()*t.length)]))}),[t,i]),Object(a.useEffect)((function(){document.documentElement.style.setProperty("--item-count",b.length),document.documentElement.style.setProperty("--chosen-i",b.lastIndexOf(f))}),[b,f]),Object(a.useEffect)((function(){if(""===s&&f.length>0){u.current.addEventListener("animationend",(function(){console.log("Callback"),setTimeout((function(){l(!1),n(f),c([])}),1e3)}))}}),[l,n,f,c,s]),r.a.createElement("div",{className:"slider"},f,r.a.createElement("div",{className:"box"},r.a.createElement("ul",{className:"sliderList",ref:u},b.map((function(e,t){return r.a.createElement("li",{key:t,className:"sliderItem"},e)})))))},j=n(22),O=n.n(j),w=n(33),N=n(34),k=n.n(N),x={get:function(){var e=Object(w.a)(O.a.mark((function e(t,n,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://developers.zomato.com/api/v2.1/search?q=".concat(t,"&start=").concat(a,"&lat=").concat(n.latitude,"&lon=").concat(n.longitude,"&sort=real_distance&order=desc"),{headers:{"user-key":"d710754ce67200fb6fb9b5e26139f50e"}});case 2:return r=e.sent,e.abrupt("return",r.data.restaurants);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},T=n(35),C=n.n(T),S=n(92),I=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),l=t[0],c=t[1],m=Object(a.useState)(!0),d=Object(o.a)(m,2),b=d[0],y=d[1],j=Object(a.useState)(""),O=Object(o.a)(j,2),w=O[0],N=O[1],k=Object(a.useState)(""),T=Object(o.a)(k,2),I=T[0],L=T[1],F=Object(a.useState)(0),_=Object(o.a)(F,2),A=_[0],B=_[1],P=Object(a.useState)({longitude:null,latitude:null}),R=Object(o.a)(P,2),D=R[0],M=R[1],q=Object(a.useState)(null),H=Object(o.a)(q,2),J=H[0],U=H[1],G=Object(a.useState)(null),z=Object(o.a)(G,2),V=z[0],$=z[1],K=Object(a.useState)([]),Q=Object(o.a)(K,2),W=Q[0],X=Q[1],Y=Object(a.useState)(!1),Z=Object(o.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(!1),ae=Object(o.a)(ne,2),re=ae[0],le=ae[1],ce=Object(a.useRef)(),oe=Object(a.useRef)(),ie=Object(a.useRef)(),se=Object(a.useState)(!1),ue=Object(o.a)(se,2),me=ue[0],de=ue[1];Object(a.useEffect)((function(){if(I&&D.latitude&&D.longitude){te(!0),x.get(I,D,A).then((function(e){if(e=e.map((function(e){return delete e.restaurant.apikey,e.restaurant})),A>0&&0===e.length)$("No more restaurants found with the keyword: ".concat(I)),setTimeout((function(){$(null)}),2e3);else if(0===e.length)return $("No restaurants found with the keyword: ".concat(I)),setTimeout((function(){$(null)}),2e3),te(!1),void fe();e.length>0&&X((function(t){return t.concat(e)})),0===A&&window.scrollTo({top:ce.current.offsetTop-10,behavior:"smooth"}),te(!1)})).catch((function(e){U("Error: ".concat(e)),setTimeout((function(){te(!1),U(null)}),3e3)}))}}),[I,D,A,J]);var fe=function(){X([]),B(0),c([]),L(""),y(!0)},ge=function(e){switch(e.code){case e.PERMISSION_DENIED:U("Location permission was declined, please enable before trying again."),setTimeout((function(){U(null)}),5e3);break;case e.POSITION_UNAVAILABLE:U("Location information is unavailable."),setTimeout((function(){U(null)}),5e3);break;case e.TIMEOUT:U("The request to get user location timed out."),setTimeout((function(){U(null)}),5e3);break;default:U("An unknown error occurred."),setTimeout((function(){U(null)}),5e3)}},Ee=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){M({longitude:e.coords.longitude,latitude:e.coords.latitude})}),ge,{enableHighAccuracy:!0,maximumAge:0,timeout:5e3}):(U("Geolocation is not supported by this browser"),setTimeout((function(){U(null)}),5e3))},he=function(){return null!==D.latitude&&null!==D.latitude};Object(a.useEffect)((function(){var e=new IntersectionObserver((function(e){Object(o.a)(e,1)[0].isIntersecting?le(!1):le(!0)}),{root:null,rootMargin:"0px",threshold:0});ie.current&&e.observe(ie.current)}),[ie]);return r.a.createElement("div",null,r.a.createElement(S.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(S.a.Brand,{href:"#",onClick:function(){return c([]),y(!0),N(""),L(""),B(0),M({longitude:null,latitude:null}),X([]),void le(!1)}},"LetsEat"),r.a.createElement(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(S.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(S.a.Collapse,{className:"justify-content-end"},r.a.createElement(S.a.Text,null,"Created by: ",r.a.createElement("a",{href:"#login"},"Jeffrey Law"))))),r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(u,{message:J,type:"error"})),r.a.createElement(f.a,{ref:ie},r.a.createElement(p,null)),r.a.createElement(f.a,{className:"justify-content-center",ref:ce},r.a.createElement(h,{restaurantList:W,newSearch:fe,foodInput:w,handleFoodInputChange:function(e){N(e.target.value)},addFoodItem:function(){var e=w.toLowerCase().trim();return y(!0),N(""),e.length<3?($("Item name must be longer than 2 characters"),void setTimeout((function(){$(null)}),1e3)):e.includes("&")?($("Item name cannot contain & character"),void setTimeout((function(){$(null)}),1e3)):(l.includes(e)&&($("Food item is already in the list"),setTimeout((function(){$(null)}),1e3)),void(!l.includes(e)&&e.length>0&&c(l.concat(e))))},handleChooseButton:function(){if(0===l.length)return $("No items added"),void setTimeout((function(){$(null)}),2e3);he()||Ee(),y(!1),de(!0)},spinning:me,loading:ee})),r.a.createElement(f.a,{className:"justify-content-center mt-2"},r.a.createElement(u,{message:V,type:"error"})),r.a.createElement(f.a,{className:"justify-content-center"},I&&W.length>0&&r.a.createElement("h1",null,"It's ",I," time! ",r.a.createElement("img",{className:"birdIcon",src:n(87),alt:"bird icon"})),r.a.createElement(s,{foodList:b?l:[],setFoodList:c})),r.a.createElement(f.a,{className:"justify-content-center"},me&&l.length>0&&r.a.createElement(v,{foodList:l,setChosenFood:L,setSpinning:de,setFoodList:c,spinning:me,chosenFood:I}))),r.a.createElement(g.a,{fluid:!0},r.a.createElement(E,{restaurants:W,coordinates:D}),r.a.createElement(f.a,{className:"justify-content-center restaurant-display",ref:oe},ee&&r.a.createElement(C.a,{type:"Circles",color:"#00BFFF"}),!ee&&I&&W.length>0&&100!==W.length&&r.a.createElement(i.a,{onClick:function(){return B(A+20)}},"Show more restaurants"),r.a.createElement(i.a,{style:{display:W.length>0&&re?"inline-block":"none"},id:"pageUp",onMouseDown:function(e){return e.preventDefault()},onClick:function(){return window.scrollTo({top:ce.current.offsetTop-10,behavior:"smooth"})}},"\u27a4"))))};n(88);c.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.86d90ee5.chunk.js.map