(this["webpackJsonplets-eat-react"]=this["webpackJsonplets-eat-react"]||[]).push([[0],{37:function(e,t,n){e.exports=n(87)},43:function(e,t,n){e.exports=n.p+"static/media/non_existent_image2.7e62e439.jpg"},84:function(e,t,n){e.exports=n.p+"static/media/dishes.fb0434cc.svg"},85:function(e,t,n){e.exports=n.p+"static/media/cute.12bc02f1.svg"},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);n(38);var a=n(0),r=n.n(a),l=n(12),c=n.n(l),o=n(6),i=n(9),s=function(e){var t=e.foodList,n=e.setFoodList;return 0===t.length?null:r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group list-group-flush",style:{margin:"10px"}},t.map((function(e){return r.a.createElement("li",{className:"list-group-item list-item text-center",key:e},e," ",r.a.createElement(i.a,{className:"ml-2 float-right",variant:"danger",onClick:function(){return n(t.filter((function(t){return t!==e})))}},"\u2715"))}))))},u=function(e){var t=e.message,n=e.type;return null===t?null:"error"===n?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},t):r.a.createElement("div",{className:"alert alert-success",role:"alert"},t)},m=n(11),d=function(e){var t=e.restaurant,a=e.coordinates,l=t.location.address.split(" ").join("+").replace(/,/g,""),c="".concat(a.latitude,",").concat(a.longitude),o="https://www.google.com/maps/dir/?api=1&origin=".concat(c,"&destination=").concat(t.name,"+").concat(l);return r.a.createElement(m.a,{style:{width:"18rem",margin:"0 auto",marginBottom:"10px"}},r.a.createElement(m.a.Img,{variant:"top",src:t.thumb||n(43)}),r.a.createElement(m.a.Body,null,r.a.createElement(m.a.Title,{className:"centerText"},r.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.name)),r.a.createElement(m.a.Subtitle,{className:"text-dark"},t.location.address),r.a.createElement(m.a.Text,null,r.a.createElement("b",null,"Hours: "),t.timings,r.a.createElement("br",null),r.a.createElement("b",null,"Cuisines: "),t.cuisines," ",r.a.createElement("br",null),r.a.createElement("b",null,"Price range: "),"$".repeat(t.price_range),"  ",r.a.createElement("b",null,"Rating: "),t.user_rating.aggregate_rating," (",t.user_rating.votes,")"),r.a.createElement("a",{href:o,className:"btn btn-outline-dark mt-1",style:{display:"block"},target:"_blank",rel:"noopener noreferrer"},"Get Directions")))},f=n(16),g=n(15),E=function(e){var t=e.restaurants,n=e.coordinates;return r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,{className:"justify-content-md-center"},t.map((function(e){return r.a.createElement(d,{key:e.id,restaurant:e,coordinates:n})}))))},h=function(e){var t=e.restaurantList,n=e.newSearch,a=e.foodInput,l=e.handleFoodInputChange,c=e.addFoodItem,o=e.handleChooseButton,s=e.spinning,u=e.loading;return t.length>0?r.a.createElement(i.a,{onClick:n},"Start new search"):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:a,onChange:l}),r.a.createElement(i.a,{onClick:c,className:"ml-1"},"Add"),r.a.createElement(i.a,{onClick:o,disabled:s||u,className:"ml-1"},"Decide for me"),r.a.createElement("br",null))},b=n(19),p=function(){return r.a.createElement(g.a,{fluid:!0},r.a.createElement(f.a,{className:"d-flex flex-column"},r.a.createElement(b.a,{className:"d-flex flex-sm-row flex-column align-items-center justify-content-center"},r.a.createElement("p",{className:"lead intro-p"},r.a.createElement("b",null,"LETSEAT")," is a cuisine decider app for the undecisive.",r.a.createElement("br",null),r.a.createElement("br",null),"Create a list of dishes or cuisines of what you or your friends might want to eat and we will do the decision-making for you.")),r.a.createElement(b.a,{className:"d-flex justify-content-center"},r.a.createElement("a",{href:"#main"},r.a.createElement("p",null,r.a.createElement(i.a,{variant:"light"},r.a.createElement("b",null,"Get Started")))))))},v=n(35),y=function(e){var t=e.foodList,n=e.setChosenFood,l=e.setSpinning,c=e.setFoodList,i=e.spinning,s=(e.chosenFood,Object(a.useRef)(null)),u=Object(a.useState)(""),m=Object(o.a)(u,2),d=m[0],f=m[1],g=Object(a.useState)([]),E=Object(o.a)(g,2),h=E[0],b=E[1];return Object(a.useEffect)((function(){if(i){var e,n=t.concat(t);if(t.length<10)n=(e=[]).concat.apply(e,Object(v.a)(Array(5).fill(n)));var a=t[Math.floor(Math.random()*t.length)];b(n),f(a)}}),[t,i]),Object(a.useEffect)((function(){document.documentElement.style.setProperty("--item-count",h.length),document.documentElement.style.setProperty("--chosen-i",h.lastIndexOf(d))}),[h,d]),r.a.createElement("div",{className:"scroller"},r.a.createElement("div",{className:"box"},r.a.createElement("ul",{className:"scrollerList",ref:s,onAnimationEnd:function(){setTimeout((function(){n(d),c([]),l(!1)}),2e3)}},h.map((function(e,t){return r.a.createElement("li",{key:t,className:"scrollerItem"},e)})))))},j=n(20),O=n.n(j),w=n(30),N=n(31),k=n.n(N),S={get:function(){var e=Object(w.a)(O.a.mark((function e(t,n,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://developers.zomato.com/api/v2.1/search?q=".concat(t,"&start=").concat(a,"&count=20&lat=").concat(n.latitude,"&lon=").concat(n.longitude,"&sort=real_distance&order=desc"),{headers:{"user-key":"2da08fdb0e253646533d241423c90e16"}});case 2:return r=e.sent,e.abrupt("return",r.data.restaurants);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},T=n(32),x=n.n(T),I=n(90),C=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),l=t[0],c=t[1],m=Object(a.useState)(!0),d=Object(o.a)(m,2),b=d[0],v=d[1],j=Object(a.useState)(""),O=Object(o.a)(j,2),w=O[0],N=O[1],k=Object(a.useState)(""),T=Object(o.a)(k,2),C=T[0],L=T[1],F=Object(a.useState)(0),A=Object(o.a)(F,2),_=A[0],B=A[1],P=Object(a.useState)({longitude:null,latitude:null}),M=Object(o.a)(P,2),D=M[0],R=M[1],H=Object(a.useState)(null),q=Object(o.a)(H,2),G=q[0],J=q[1],U=Object(a.useState)(null),z=Object(o.a)(U,2),V=z[0],Y=z[1],$=Object(a.useState)(null),K=Object(o.a)($,2),Q=K[0],W=K[1],X=Object(a.useState)([]),Z=Object(o.a)(X,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(!1),ae=Object(o.a)(ne,2),re=ae[0],le=ae[1],ce=Object(a.useState)(!1),oe=Object(o.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(a.useRef)(null),me=Object(a.useRef)(),de=Object(a.useRef)(),fe=Object(a.useState)(!1),ge=Object(o.a)(fe,2),Ee=ge[0],he=ge[1],be=Object(a.useState)("navbar-transparent"),pe=Object(o.a)(be,2),ve=pe[0],ye=pe[1];Object(a.useEffect)((function(){window.addEventListener("scroll",je)}));var je=function(){window.scrollY>100?ye("navbar-white"):ye("navbar-transparent")};Object(a.useEffect)((function(){if(C&&D.latitude&&D.longitude){le(!0),S.get(C,D,_).then((function(e){if(e=e.map((function(e){return delete e.restaurant.apikey,e.restaurant})),_>0&&0===e.length)W("No more restaurants found"),setTimeout((function(){W(null)}),2e3);else if(0===e.length)return Y("No restaurants found with the keyword: ".concat(C)),setTimeout((function(){Y(null)}),2e3),le(!1),void Oe();e.length>0&&te((function(t){return t.concat(e)})),le(!1)})).then((function(){0===_&&setTimeout((function(){window.scrollTo({top:ue.current.offsetTop-5*window.innerHeight/100-10,behavior:"smooth"})}),100)})).catch((function(e){J("Error: ".concat(e)),setTimeout((function(){le(!1),J(null)}),3e3)}))}}),[C,D,_,G]);var Oe=function(){te([]),B(0),c([]),L(""),v(!0)},we=function(e){switch(e.code){case e.PERMISSION_DENIED:var t="Please allow location permission access before trying again.";navigator.userAgent.includes("Mac")&&(t="Please allow location permission access in browser and in MacOS security preferences before trying again."),J(t),setTimeout((function(){J(null)}),5e3);break;case e.POSITION_UNAVAILABLE:J("Location information is unavailable."),setTimeout((function(){J(null)}),5e3);break;case e.TIMEOUT:J("The request to get user location timed out."),setTimeout((function(){J(null)}),5e3);break;default:J("An unknown error occurred."),setTimeout((function(){J(null)}),5e3)}},Ne=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){R({longitude:e.coords.longitude,latitude:e.coords.latitude}),v(!1),he(!0)}),we,{enableHighAccuracy:!0,maximumAge:0,timeout:5e3}):(J("Geolocation is not supported by this browser"),setTimeout((function(){J(null)}),5e3))},ke=function(){return null!==D.latitude&&null!==D.latitude};Object(a.useEffect)((function(){var e=new IntersectionObserver((function(e){Object(o.a)(e,1)[0].isIntersecting?se(!1):se(!0)}),{root:null,rootMargin:"0px",threshold:0});de.current&&e.observe(de.current)}),[de]);return r.a.createElement("div",null,r.a.createElement(g.a,{fluid:!0,className:"main-div"},r.a.createElement(I.a,{fixed:"top",expand:"lg",className:ve},r.a.createElement(I.a.Brand,{href:"#",onClick:function(){return c([]),v(!0),N(""),L(""),B(0),R({longitude:null,latitude:null}),te([]),void se(!1)}},"LetsEat"),r.a.createElement(I.a.Text,null,"Created by: ",r.a.createElement("a",{href:"https://github.com/jeffreylaw",target:"_blank",rel:"noopener noreferrer"},"Jeffrey Law"))),r.a.createElement(f.a,{className:""},r.a.createElement(u,{message:G,type:"error"})),r.a.createElement(f.a,{ref:de,className:"intro-div align-items-center"},r.a.createElement(p,null))),r.a.createElement(g.a,{id:"main"},r.a.createElement(f.a,{className:"tutorial-div"},r.a.createElement("img",{src:n(84),style:{width:"16rem"},alt:"dishes with smiley face"}),r.a.createElement("ol",null,r.a.createElement("h1",null,"How to use"),r.a.createElement("li",null,"Enter dishes or cuisines that you might like to eat."),r.a.createElement("li",null,"Let us randomly choose an item from the list."),r.a.createElement("li",null,"Browse through the relevant restaurants around your location.*"),r.a.createElement("p",null,r.a.createElement("small",null,"*Access to your location required. Accuracy may vary on PC devices."))))),r.a.createElement(g.a,null,r.a.createElement(f.a,{className:"justify-content-center test",ref:ue},r.a.createElement(h,{restaurantList:ee,newSearch:Oe,foodInput:w,handleFoodInputChange:function(e){N(e.target.value)},addFoodItem:function(){var e=w.toLowerCase().trim();return v(!0),N(""),e.length<3?(Y("Item name must be longer than 2 characters"),void setTimeout((function(){Y(null)}),1e3)):e.includes("&")?(Y("Item name cannot contain & character"),void setTimeout((function(){Y(null)}),1e3)):(l.includes(e)&&(Y("Food item is already in the list"),setTimeout((function(){Y(null)}),2e3)),void(!l.includes(e)&&e.length>0&&c(l.concat(e))))},handleChooseButton:function(){if(0===l.length)return Y("No items added"),void setTimeout((function(){Y(null)}),2e3);ke()?(v(!1),he(!0)):Ne()},spinning:Ee,loading:re})),r.a.createElement(f.a,{className:"justify-content-center mt-2"},r.a.createElement(u,{message:V,type:"error"})),r.a.createElement(f.a,{className:"justify-content-center"},C&&ee.length>0&&r.a.createElement("h1",null,"It's ",C," time! ",r.a.createElement("img",{className:"birdIcon",src:n(85),alt:"bird icon"})),r.a.createElement(s,{foodList:b?l:[],setFoodList:c})),r.a.createElement(f.a,{className:"justify-content-center"},Ee&&l.length>0&&r.a.createElement(y,{foodList:l,setChosenFood:L,setSpinning:he,setFoodList:c,spinning:Ee,chosenFood:C}))),r.a.createElement(g.a,{fluid:!0},r.a.createElement(E,{restaurants:ee,coordinates:D}),r.a.createElement(f.a,{className:"justify-content-center mt-3 mb-1",ref:me},re&&r.a.createElement(x.a,{type:"ThreeDots",color:"#00BFFF"}),!re&&C&&ee.length>0&&100!==ee.length&&r.a.createElement(i.a,{onClick:function(){return B(_+20)}},"Show more restaurants")),r.a.createElement(f.a,{className:"justify-content-center bottom-div"},r.a.createElement(u,{message:Q,type:"error"}),r.a.createElement(i.a,{style:{display:ee.length>0&&ie?"inline-block":"none"},id:"pageUp",onMouseDown:function(e){return e.preventDefault()},onClick:function(){return window.scrollTo({top:ue.current.offsetTop-5*window.innerHeight/100-10,behavior:"smooth"})}},"\u27a4"))))};n(86);c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.4fa4866b.chunk.js.map